%!TEX encoding = UTF-8 Unicode
%!TEX root = ../lect-week06.tex

%%%


\Subsection{Implementation saknas: ???}

\begin{Slide}{Implementation saknas: ???}
\begin{itemize}
\item Ofta vill man bygga kod iterativt och steg för steg lägga till olika funktionalitet.

\item Standardfunktionen \code{???} ger vid anrop undantaget \Alert{\texttt{NotImplementedError}} och kan användas på platser i koden där man ännu inte är färdig. 

\item \code{???} tillåter \Emph{kompilering av ofärdig kod}.

\pause

\item Undantag har bottentypen \code{Nothing} som är subtyp till \emph{alla} typer och kan därmed tilldelas referenser av godtycklig typ.

\begin{REPLnonum}
scala> lazy val sprängsSnart: Int = ???

scala> sprängsSnart + 42
scala.NotImplementedError: an implementation is missing
  at scala.Predef$.$qmark$qmark$qmark(Predef.scala:230)
  at .sprängsSnart$lzycompute(<console>:11)
  at .sprängsSnart(<console>:11)
\end{REPLnonum} 

\end{itemize}
\end{Slide}

\begin{Slide}{Exempel: ofärdig kod}
\begin{Code}[basicstyle=\SlideFontSize{9}{11}\ttfamily\selectfont]
case class Person(name: String, age: Int){
  def ärGammal: Boolean = ???   //def ännu ej bestämd
  def ärUng = !ärGammal
  def ärTonåring = age >= 13 && age <= 19
}
\end{Code}
\begin{REPLnonum}
scala> Person("Björn", 49).ärTonåring
res23: Boolean = false

scala> Person("Sandra", 35).ärUng
scala.NotImplementedError: an implementation is missing
  at scala.Predef$.$qmark$qmark$qmark(Predef.scala:230)
  at Person.ärGammal(<console>:12)
  at Person.ärUng(<console>:13)
\end{REPLnonum}
\end{Slide}


\Subsection{Klass-specifikationer}




\begin{Slide}{Specifikationer av klasser i Scala}\footnotesize
\begin{itemize}
\item Specifikationer av klasser innehåller information som \emph{den som ska implementera} klassen behöver veta.
\item Specifikationer innehåller liknande information som dokumentationen av klassen (scaladoc), som beskriver vad \emph{användaren} av klassen behöver veta.  
\end{itemize}
\begin{ScalaSpec}{Person}
/** Encapsulate immutable data about a Person: name and age. */ 
case class Person(name: String, age: Int = 0){
  /** Tests whether this Person is more than 17 years old. */
  def isAdult: Boolean = ???
}
\end{ScalaSpec}
\begin{itemize}
\item Specifikationer av Scala-klasser utgör i denna kurs ofullständig kod som kan kompileras utan fel. 
\item Saknade implementationer markeras med \code{???}
\item \Emph{Dokumentationskommentarer} utgör \Alert{krav} på implementationen.
\end{itemize}

\end{Slide}


\begin{Slide}{Specifikationer av klasser och objekt}
\begin{ScalaSpec}{MutablePerson}
/** Encapsulates mutable data about a person. */
class MutablePerson(initName: String, initAge: Int){
  /** The name of the person. */
  def getName: String = ???
  
  /** Update the name of the Person */
  def setName(name: String): Unit = ???

  /** The age of this person. */
  def getAge: Int = ???

  /** Update the age of this Person */
  def setAge(age: Int): Unit = ???

  /** Tests whether this Person is more than 17 years old. */
  def isAdult: Boolean = ???

  /** A string representation of this Person, e.g.: Person(Robin, 25) */
  override def toString: String = ???
}
object MutablePerson {
  /** Creates a new MutablePerson with default age. */
  def apply(name: String): MutablePerson = ???
}
\end{ScalaSpec}

\end{Slide}

\ifkompendium
Man brukar inte använda \code{get} och \code{set} i metodnamn i Scala. Mer senare om principen om enhetlig access \Eng{uniform access principle} och hur man gör ''setters'' som möjliggör tilldelningssyntax.
\fi


\begin{Slide}{Specifikationer av Java-klasser}
\begin{itemize}\small
\item Specificerar signaturer för konstruktorer och metoder. 
\item Kommentarerna utgör krav på implementationen.  
\item Används flitigt på extentor i EDA016, EDA011, EDA017...
\item Javaklass-specifikationerna \Alert{saknar} \Emph{implementationer} och behöver kompletteras med metodkroppar och klassrubriker innan de kan kompileras.
\end{itemize}
\begin{JavaSpec}{class Person}
/** Skapar en person med namnet name och åldern age. */
Person(String name, int age);

/** Ger en sträng med denna persons namn. */
String getName();

/** Ändrar denna persons ålder. */
void setAge(int age);

/** Anger åldersgränsen för när man blir myndig. */
static int adultLimit = 18;
\end{JavaSpec}
\end{Slide}


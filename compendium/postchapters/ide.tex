%!TEX encoding = UTF-8 Unicode
%!TEX root = ../compendium.tex

\chapter{Integrerad utvecklingsmiljö}\label{appendix:ide}

\section{Vad är en integrerad utvecklingsmiljö?}

En integrerad utvecklingsmiljö \Eng{integrated development environment, IDE} samlar ett flertal verktyg, inklusive en avancerad \textbf{editor} (se appendix \ref{appendix:edit}), för att skapa, köra och testa program. Det finns flera utvecklingsmiljöer att välja mellan, som kan användas för både Scala och Java.

En IDE ger stöd för \textbf{kodkomplettering} \Eng{code completion} där tillgängliga metoder visas i en lista och resten av ett namn kan fyllas efter att du skrivit de första bokstäverna i namnet. En IDE kan hjälpa dig med formattering och även skapa skelettkod utifrån \textbf{kodmallar} \Eng{code templates}. Med \textbf{felindikering} \Eng{error highlighting} får du understrykning av vissa fel direkt i koden och ibland kan du även få hjälp med förslag på åtgärder för att rätta till enkla fel. Funktioner för \textbf{avlusning} \Eng{debugging} hjälper dig att felsöka medan du kör din kod. Med funktioner för \textbf{omstrukturering} \Eng{refactoring} av kod får du hjälp av editorn i samarbete med kompilatorn att göra omfattande strukturförändringar i många kodfiler samtidigt, t.ex. namnbyten med hänsyn taget till språkets synlighetsregler.  

Alla dessa avancerade funktioner kan öka produktiviteten avsevärt, men samtidigt tar de tid att lära sig och en IDE kan kräva mycket datorkraft och viss väntetid jämfört med en vanlig, fristående editor. I början kan all funktionalitet upplevas som överväldigande och det kan vara svårt att hitta i alla menyer och inställningar. Ska man bara skriva ett litet, enkelt program, eller göra några mindre ändringar, är det många som föredrar en fristående, snabbstartad kodeditor före en fullfjädrad, tungrodd IDE. Å andra sidan kan en IDE med kodkomplettering vara till stor hjälp när man ska lära sig ett nytt api och experimentera med en okänd kodmassa.

I kursen använder vi flera utvecklingsmiljöer. På första labben använder vi Kojo (avsnitt \ref{appendix:ide:kojo}) som är en IDE speciellt anpassad på nybörjare. I laborationerna senare i kursen kan du välja att använda någon av de professionella utvecklingsmiljöerna Eclipse (avsnitt \ref{appendix:ide:eclipse}) eller IntelliJ (avsnitt \ref{appendix:ide:intellij}). Om du inte vet vilken du ska välja, börja med att prova Eclipse.


\newpage

\section{Kojo}\label{appendix:ide:kojo}

Kojo är en integrerad utvecklingsmiljö för Scala som är speciellt anpassad för nybörjare i programmering. Kojo används i LTH:s Science Center Vattenhallen för utbildning av grundskolelärare i programmering och vid skolbesök och annan besöksverksamhet, i vilken lärare och studenter vid LTH arbetar som handledare. 

Kursens första laboration genomförs med hjälp av Kojo, men Kojo kan med fördel användas som komplement till Scala REPL och annan IDE under hela kursens gång. Medan Scala REPL lämpar sig för korta kodsnuttar, och en fullfjädrad, professionell IDE har funktioner för att hantera riktigt stora programmeringsprojekt, passar Kojo bra för mellanstora program. I Kojo finns även lätttillgängliga bibliotek som gör tröskeln lägre att programmera rörlig grafik och enkla spel.   


\begin{figure}[H]
\centering
\includegraphics[width=\textwidth]{../img/kojo/kojo.png}
\caption{Den integrerade utvecklingsmiljön Kojo, anpassad för nybörjare.}
\label{fig:appendix:ide:kojo}
\end{figure} 

\subsection{Installera Kojo}

Kojo är förinstallerat på LTH:s datorer och körs igång med kommandot \texttt{kojo}. För instruktioner om hur du installerar Kojo på din egen dator se här:\\
\href{http://www.lth.se/programmera/installera/}{lth.se/programmera/installera}

Kojo kräver att \texttt{java} finns på din dator. Eftersom du behöver tillgång till JDK i kursen, är det lika bra att installera hela JDK direkt (och inte bara JRE, så som beskrivs å länken ovan); se vidare hur du gör detta i avsnitt \ref{appendix:compile:install-jdk}. 
%\href{http://www.kogics.net/kojo-download}{www.kogics.net/kojo-download}


\subsection{Använda Kojo}

När du startar Kojo första gången, välj ''Svenska'' i språkmenyn och starta om Kojo. Därefter fungerar grafikfunktionerna på svenska enligt tabell \ref{table:kojo:functions}. När du startat om Kojo inställt på Svenska ser programmet ut ungeför som i figur \ref{fig:appendix:ide:kojo} på sidan \pageref{fig:appendix:ide:kojo}.


Det finns ett antal användbara kortkommando som du hittar i menyerna i Kojo. Undersök speciellt Ctrl+Alt+Mellanslag som ger autokomplettering baserat på det du börjat skriva.


{\small\renewcommand{\arraystretch}{1.45}
\begin{longtable}{@{}p{0.42\textwidth} p{0.55\textwidth}}

\caption{Några av sköldpaddans funktioner. Se även \href{http://lth.se/programmera}{lth.se/programmera}}\label{table:kojo:functions}\\

\emph{Svenska/Engelska} & \emph{Vad händer?}  \\ \hline
\input{postchapters/kojo.tex}

\hline
\end{longtable}
}%end small

\noindent Scala-koden för den svenska paddans api finns här: \\
\href{https://bitbucket.org/lalit_pant/kojo/src/tip/src/main/scala/net/kogics/kojo/lite/i18n/svInit.scala}{bitbucket.org/lalit\_pant/kojo/src/tip/src/main/scala/net/kogics/\\kojo/lite/i18n/svInit.scala}




\newpage

\section{Eclipse och ScalaIDE}\label{appendix:ide:eclipse}

Eclipse 
\footnote{\href{https://en.wikipedia.org/wiki/Eclipse_(software)}{en.wikipedia.org/wiki/Eclipse\_(software)}}
är en IDE som stödjer många olika programmeringsspråk. Eclipse är skriven i Java och bygger vidare på ett öppenkällkodsprojekt som initierades av IBM. Eclipse är ett fritt och öppet projekt som numera kontrolleras av en oberoende stiftelse.

Till Eclipse finns en insticksmodul \Eng{plug-in} som kallas ScalaIDE och erbjuder stöd för Scala med tillhörande standardbibliotek.

Eclipse är en omfattande och avancerad programmeringsmiljö med många funktioner och inställningar. Det finns även en omfattande uppsättning insticksmoduler och tilläggsprogram som underlättar utveckling av t.ex. webbprogram, databaser och mycket annat. 

I detta avsnitt ges länkar till installation samt tips om hur du kommer igång med att använda Eclipse och ScalaIDE. Det går ganska snabbt att lära sig grunderna, men det kräven en viss ansträngning att lära sig de mer avancerade funktionerna. Det finns omfattande resurser på nätet som hjälper dig vidare. 


\subsection{Installera Eclipse Mars och ScalaIDE}\label{appendix:ide:eclipse:install}

Eclipse med ScalaIDE är förinstallerat på LTH:s datorer och startas med kommandot \texttt{scalaide} i ett terminalfönster.
ScalaIDE fungerar med Eclipse-versionerna Luna och Mars (men i skrivande stund ännu \textit{inte} för den allra senaste versionen kallad Neon). 

Installationen görs enligt följande:

\begin{enumerate}
\item Kontrollera enligt avsnitt \ref{appendix:compile:check-jdk} att du har \texttt{java} installerat och installera vid behov JDK enligt avsnitt \ref{appendix:compile:install-jdk}.

\item Installera Eclipse version \textbf{Mars}, varianten för \textbf{Java Developers} som återfinns på denna sida: \\ \url{https://www.eclipse.org/downloads/packages/release/Mars/2} \\ som är den andra varianten i listan (alltså inte Java EE). Följ dessa steg:
\begin{enumerate}
\item Klicka på den \textbf{64-bit}-variant som passar ditt operativsystem.
\item Filen som laddas ner heter något som liknar (beroende på OS): \\ \texttt{eclipse-java-mars-2-win32-x86\_64.zip} 
\\ Det tar ett tag att ladda ner filen som är på ca 170MB. Om du klickar på ''select a mirror'' kan du välja en svensk sajt för att ladda ner snabbare. 

\item Dubbelklicka på filen för att packa upp den, vilket kan ta många minuter. Du får, när upppackningen är klar, ett bibliotek med en fungerande Eclipse-installation som du kan placera var du vill. Kör du Windows läggs den förslagsvis här:\\ 
\code|C:\Program Files (x86)\eclipse\eclipse-java-mars-2-win32-x86_64|

\item för Ubuntu Linux finns kompletterande installationsanvisningar här, som ger dig ikon i dash m.m.: 
\\ \url{http://askubuntu.com/questions/26632/how-to-install-eclipse}
\end{enumerate}

\item Installera Scala IDE inifrån Eclipse enligt nedan steg:
\begin{enumerate}
\item Starta Eclipse, t.ex. genom att köra igång den exekverbara filen som ligger i underbiblioteket \texttt{eclipse}, i Windows heter den \texttt{eclipse.exe} medan den exekverbara filen i Linux heter \texttt{eclipse} utan filändelse.

\item Välj någon plats för workspace (kvittar vilken just nu, kan ändras senare).

\item Klicka på menyn \textit{Help} $\rightarrow$ \textit{Install new software}.

\item Klicka på \textit{Add}-knappen till höger och skriv: \\ \textit{''ScalaIDE for Scala 2.11''} i \textit{Name}-fältet och ange denna adress i \textit{Location}-fältet: \\
  {\small\mbox{\url{http://download.scala-ide.org/sdk/lithium/e44/scala211/stable/site}}} \\
  och klicka \textit{OK}.
  
\item Du får nu upp en lista med alternativ. Kryssa för alternativet\\ \textit{Scala IDE for Eclipse} \\ och klicka \textit{Next} och sedan \textit{Next} och acceptera licensvillkoren och klicka \textit{Finnish}.

\item Låt installationen ta sin tid och starta sedan om Eclipse när installationen är färdig. 

\item När Eclipse är igång igen visas en dialog som föreslår att du ska köra \textit{Setup Diagnostics}. Gör detta och klicka för \textit{Use recommended default settings}. Följ även instruktionerna om hur du ändrar i filen \textit{eclipse.ini} för att ge Eclipse mer minne, vilket gör att Scala IDE fungerar smidigare.  \TODO Ge hjälp om vad sätta här...

\item Kompletterande information finns här, inklusive en video som visar installationsproceduren och hur man kommer igång med ett ''hello world''-program: \\ \url{http://scala-ide.org/download/current.html}


\end{enumerate}





\end{enumerate}

\subsection{Använda Eclipse och ScalaIDE}\label{appendix:ide:eclipse:use}

Ett grundläggande koncept i Eclipse är \textbf{workspace}, som betecknar ett bibliotek i ditt filsystem som utgör ett arbetsområde där du lagrar ett eller flera \textbf{projekt}. Eclipse genererar en specifik katalogstruktur i ditt workspace och lagra en hel mängd kataloger och filer som Eclipse använder när du editerar, kompilerar och kör dina programmeringsprojekt. Även de inställningar du gjort som påverkar hur Eclipse ser ut och fungerar lagras i ditt workspace.

\subsubsection{Ladda ner och importera projekt från kursens workspace}

TODO: skriv mer här

\begin{itemize}
\item Ladda ner kursens workspace här: \url{http://cs.lth.se/pgk/workspace}
\item Packa upp filen på lämpligt ställe.
\item Starta Eclipse med ScalaIDE-plugin (för installation se \ref{appendix:ide:eclipse:install}).
\item Bläddra till biblioteket du nyss packade upp, ungefär som i \ref{fig:eclipse:ide:open}
\begin{figure}[H]
\centering
\includegraphics[width=0.7\textwidth]{../img/pirates/selectws.png}
\caption { \emph{Öppna workspace:} Bläddra fram till kursens workspace och klicka {\bf OK. }}
\label{fig:eclipse:ide:open}
\end{figure}

\item Gå vidare från startskärmen genom att välja {\bf Workspace}, se Fig.\ref{fig:eclipse:ide:selectws}.
\begin{figure}[H]
\centering
\includegraphics[width=0.7\textwidth]{../img/pirates/selectws2.png} \\

\caption {Välj {\bf workspace}.}
\label{fig:eclipse:ide:selectws}
\end{figure}

\item Uppe till höger ser du vilken \emph{vy} du har. I Eclipse kommer vi växla mellan Scala, Java och debug-vyer. Dessa läggs till via listan som nås genom den fönsterliknande ikonen enligt Fig.~\ref{fig:eclipse:ide:changeview}. Du ska ha {\bf Scala} igång.

\begin{figure}[H]
\centering
\includegraphics[width=0.7\textwidth]{../img/pirates/selectscala.png} 

\caption {Lägg till vyer från listan med installerade plugin.}
\label{fig:eclipse:ide:changeview}
\end{figure}

\item Högerklicka i {\bf Project Explorer} och välj {\bf New} -> {\bf Scala Project}, se Fig.~\ref{fig:eclipse:ide:createproject}. Importera existerande project genom att genom att avmarkera \emph{Use default location} och bläddra till katalogen för respektive laboration och sen {\bf Finish}, se exempel i Fig.~\ref{fig:eclipse:ide:import} (namnet sätts automatiskt). Du kan också skapa nya projekt genom att ange ett projektnamn direkt och sen klicka {\bf Finish} enligt Fig.~\ref{fig:eclipse:ide:newproject}.

\begin{figure}[H]
\centering
\includegraphics[width=0.7\textwidth]{../img/pirates/createproject.png} 

\caption {Välj att {\bf Scala Project} i menyerna.}
\label{fig:eclipse:ide:createproject}
\end{figure}
\begin{figure}[H]
\centering
\includegraphics[width=0.5\textwidth]{../img/pirates/importproject.png} 

\caption {Importera existerande projekt genom att ange sökvägen.}
\label{fig:eclipse:ide:import}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[width=0.5\textwidth]{../img/pirates/nameproject.png} 

\caption {Skapa ett nytt projekt genom att ange namn.}
\label{fig:eclipse:ide:newproject}
\end{figure}


\item Du skapar nya klasser och objekt på liknande sätt, genom att högerklicka och välja {\bf New}, se exempel i Fig.~\ref{fig:eclipse:ide:createobject}


\begin{figure}[H]
\centering
\includegraphics[width=0.7\textwidth]{../img/pirates/createobject.png} 
\caption {Skapa ett nytt objekt via menyerna.}
\label{fig:eclipse:ide:createobject}
\end{figure}

\item Skriv ett main-program och exekvera det genom att markera klassen i {\bf Project Explorer} och sen klicka på den gröna pilen. Utskrifter kommer till konsolen längst ner. 

\begin{figure}[H]
\centering
\includegraphics[width=0.7\textwidth]{../img/pirates/exekvera.png} 
\caption {Exekvera med den gröna pilen.}
\label{fig:eclipse:ide:exec}
\end{figure}
\end{itemize}

\newpage

\subsection{IntelliJ IDEA}\label{appendix:ide:intellij}

IntelliJ IDEA%
\footnote{\href{https://en.wikipedia.org/wiki/IntelliJ_IDEA}{en.wikipedia.org/wiki/IntelliJ\_IDEA}}
 är en IDE som stödjer många olika programmeringsspråk. IntelliJ är skriven i Java och utvecklas av det tjeckiska företaget JetBrains. 

IntelliJ IDEA finns i två varianter: en gratis gemenskapsvariant med öppenkällkodslicens \Eng{Community edition}, samt en betalvariant med stängd källkod och support-tjänster.


Till IntelliJ IDEA finns en insticksmodul \Eng{plug-in} för Scala och dess tillhörande standardbibliotek.

IntelliJ IDEA är en omfattande och avancerad programmeringsmiljö med många funktioner och inställningar. Det finns även en omfattande uppsättning insticksmoduler och tilläggsprogram som underlättar utveckling av t.ex. webbprogram, databaser och mycket annat. 

I detta avsnitt ges länkar till installation samt tips om hur du kommer igång med att använda IntelliJ IDEA med Scala. Det går ganska snabbt att lära sig grunderna, men det kräven en viss ansträngning att lära sig de mer avancerade funktionerna. Det finns omfattande resurser på nätet som hjälper dig vidare. 



\subsection{Installera IntelliJ med Scala}\label{appendix:ide:intellij:install}

IntelliJ med Scala-plug-in är förinstallerat på LTH:s datorer och startas med kommandot \texttt{intellij} i ett terminalfönster.

\subsection{Använda IntelliJ}\label{appendix:ide:intellij:use}


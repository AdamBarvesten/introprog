%!TEX root = ../compendium.tex

\Exercise{\tt{expressions}}



\begin{Goals}
\item Lär dig detta
\item Lär dig och detta
\end{Goals}

\begin{Preparations}
\item Läs kap.~\ref{intro}
\item Säkerställ att du kan avända de grundläggande terminalkommandona \code{ls} och \code{cd} för att inspektera och navigera i filträdet, se kap.~\ref{terminal}. 
\item Du behöver en dator med scala installerad. Om du inte har Scala installerad på din maskin, se installationsanvisningar i kap.~\ref{installScala}
\item Starta den editor du vill använda under övningarna, se kap.~\ref{editor}.
\end{Preparations}

\BasicTasks

%\TaskSection{Exekvera kod: REPL, skript, app}

\Task Starta Scala REPL och skriv satsen \code{println("hej")} och tryck på \textit{Enter}. 

\begin{REPL}
$ scala
Welcome to Scala version 2.11.7 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_66).
Type in expressions to have them evaluated.
Type :help for more information.

scala> println("hejsan REPL")
\end{REPL}

\Subtask Vad händer? 

\Subtask Skriv samma sats igen men ''glöm bort'' att skriva högerparentesen innan du trycker på \textit{Enter}. Vad händer?

\Subtask Evaulera uttrycket \code{"gurka" + "tomat"} i REPL. Vad har uttrycket för värde och typ? Vilken siffra står efter ordet \code{res} i variabeln som lagrara resultatet?

\begin{REPL}
scala> "gurka" + "tomat"   //tryck ENTER
\end{REPL}

\Subtask Evaluera uttrycket \code{res0 * 42} men byt ut \code{0}:an mot siffran efter \code{res} i utskriften vid förra evalueringen. Vad har uttrycket för värde och typ?
\begin{REPL}
scala> res2 * 42
\end{REPL}

\Task Skapa med hjälp av en editor en fil med namn \texttt{hello-script.scala} som innehåller denna enda rad:
\begin{Code}
println("hej skript")
\end{Code}
Spara filen och kör kommandot \code{scala hello-script.scala} i terminalen:
\begin{REPL}
$ scala hello-script.scala
\end{REPL}

\Subtask Vad händer?

\Subtask Ändra i filen så att högerparentesen saknas. Spara och kör skriptfilen igen. Vad händer?

\Task Skapa med hjälp av en editor en fil med namn \texttt{hello-app.scala} som innehåller dessa rader:


\scalainputlisting{examples/hello-app.scala}

\noindent Kompilera och kör koden.

\Subtask\Pen Vilket alternativ går snabbast att köra igång, ett skript eller en kompilerad applikation? Varför? Vilket alternativ kör snabbast när väl exekveringen är igång?

\Subtask Ändra i din kod så att kompilatorn ger följande felmeddelande: \\
\texttt{Missing closing brace}

%\TaskSection{Uttryck}

\Task \textit{Literaler}. Vilken typ har följande literaler?

\Subtask \code{42} 

\Subtask \code{42L}

\Subtask \code{'*'}

\Subtask \code{"*"}

\Subtask \code{42.0}

\Subtask \code{42.0F}

\Subtask \code{true}

\Subtask \code{false}

%~\linebreak[0]

\Task\Pen Vad är det för skillnad på en sats och ett uttryck?

\Task Vilken typ och vilket värde har följande uttryck? 

\Subtask \code{1 + 41}

\Subtask \code{1.0 + 41}

\Subtask \code{"gurk" + 'a'}

\Subtask \code{'A'}

\Subtask \code{'A'.toInt}

\Subtask \linebreak[0] \code{'0'.toInt}

\Subtask \code{'1'.toInt}

\Subtask \code{'9'.toInt}

\Subtask \code{('A' + '0').toChar}

\Subtask \code{"*!%#".charAt(0)}

\Task \textit{Heltalsdivision}



\Task \textit{Hetalsomfång}. För var och en av heltalstyperna i deluppgifterna nedan: undersök i REPL med operationen \code{MaxValue} resp. \code{MinValue}, till exempel \code{Int.MaxValue} vad som är största och minsta värde. 

\Subtask \code{Byte}

\Subtask \code{Short}

\Subtask \code{Int}

\Subtask \code{Long}

\Task Klassen \code{java.lang.Math} och paketobjektet \code{scala.math}.

\Subtask Undersök genom att trycka på Tab-tangenten efter att du skriver nedan, vilka funktioner som finns i \code{Math} och \code{math}. Vad heter konstanten $\pi$ i java.lang.Math respektive scala.math?

\begin{REPL}
scala> java.lang.Math.    //tryck TAB
scala> scala.math.        //tryck TAB
\end{REPL}

\Subtask Undersök dokumentationen för klassen \code{java.lang.Math} här: \\ \url{https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html} \\
Vilka trigonometriska funktioner erbjuds? Vad gör \code{Math.hypot}?

\Subtask Undersök källkoden för pakobjektet \code{scala.math} här: \\
\url{https://github.com/scala/scala/blob/v2.11.7/src/library/scala/math/package.scala}
Ge exempel på en funktion i \code{java.lang.Math} som inte finns i \code{scala.math}.


%\TaskSection{Noggranhet och undantag i aritmetiska uttryck}

\Task Vad händer här? Notera undantag \Eng{exceptions} och nogranhetsproblem. 

\Subtask \code{Int.MaxValue} + 1

\Subtask \code{1 / 0}

\Subtask \code{1E8 + 1E-8}

\Subtask \code{1E9 + 1E-9}

\Subtask \code{math.pow(math.hypot(3,6), 2)}

\Subtask \code{1.0 / 0}

\Subtask \code{(1.0 / 0).toInt}

\Subtask \code{math.sqrt(-1)}

\ExtraTasks

\AdvancedTasks

\Task Integer.toBinaryString, Integer.toHexString

\Task 0x2a

\Task 

\Task BigInt, BigDecimal

\Task Vad händer här? 
\begin{REPL}
scala> java.lang.Math.multiplyExact(2, 42)
scala> java.lang.Math.multiplyExact(Int.MaxValue, Int.MaxValue)
\end{REPL}

\noindent \textit{Tips:} Eftersom \code{java.lang} importeras implicit så du kan även anropa \\ \code{Math.multiplyExact} direkt utan \code{java.lang} före.

\Task Sök reda på dokumentationen för funktionen multiplyExact i javadoc för klassen java.lang.Math i JDK 8. 

\Task Sök i javadoc för Math efter förekomster av texten \textit{''throwing an exception if the result overflows''}. Vilka fler funktioner finns i java.lang.Math som hjälper en att upptäcka om det blir overflow?

\Task Använda Scala REPL för att undersöka konstanterna nedan. Vilket av dessa värden är negativt? Vad kan man ha för praktisk nytta av dessa värden i ett program som sysslar med flyttalsberäkningar?

\Subtask \code{java.lang.Double.MIN_VALUE}

\Subtask \code{scala.Double.MinValue} 

\Subtask \code{scala.Double.MinPositiveValue}

\Task För typerna \code{Byte}, \code{Short}, \code{Char}, \code{Int}, \code{Long}, \code{Float}, \code{Double}: Undersök hur många bitar som behövs för att representera varje typs omfång? \\*
\textit{Tips:} Några användbara uttryck: \\*
 \code{Integer.toBinaryString(Int.MaxValue + 1).size} \\*
 \code{Integer.toBinaryString((math.pow(2,16) - 1).toInt).size} \\*
 \code{1 + math.log(Long.MaxValue)/math.log(2)}
Se även språkspecifikationen för Scala, kapitlet om heltalsliteraler: \\
\url{http://www.scala-lang.org/files/archive/spec/2.11/01-lexical-syntax.html#integer-literals}




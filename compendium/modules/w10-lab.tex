%!TEX encoding = UTF-8 Unicode

%!TEX root = ../compendium.tex

\Lab{\LabWeekTEN}

\begin{Goals}
\item Kunna använda inbyggda sorteringsfunktioner
\item Kunna använda inbyggda sökfunktioner.
\item Känna till hur strängar ordnas.
\item Kunna läsa text i tabellform från fil och webbaddress.
\item Kunna använda registrering (frekvensräkning) för enkla statistikberäkningar.
\item Kunna skriva text i tabellform till fil.
\item Kunna läsa kommandon från startargument.
\item Kunna hantera oren (eng. impure) kod. (Exempelvis inläsning från tangenbordet)
\item ... \TODO mer här
\end{Goals}

\begin{Preparations}
\item \StudyTheory{10}
\item \DoExercise{\ExeWeekTEN}{10}
\item \ReadTheLab
\item Svara på denna enkät $<<$ \TODO Länk till google forms-enkät $>>$  \\
\TODO förslag till Anton på innehåll i google forms-enkät:\\ \textit{Vilket är ditt favoritalternativ?}
\begin{itemize}[nolistsep,noitemsep]
\item \textbf{program} (D, W, C, E, F, I, Bio, K, L, M, Bme, Nano, V), 
\item \textbf{OS} (Win7, Win10, macOS X, Linux, Android, IOS, ChromeOS), 
\item \textbf{editor} (gedit, vim, emacs, vi, notepad++, sublime text, atom)
\item \textbf{IDE} (Eclipse, IntelliJ/AndroidStudio, VisualStudio, xcode), 
\item \textbf{socialnät} (facebook, snapchat, linkedin, instagram, github), 
\item \textbf{webbläsare} (firefox, chrome, safari, edge, vivaldi, opera)
\item \textbf{sorteringsalgoritm} (insättningssortering, urvalssortering)
\item \textbf{språk} (Java, Python, PHP, C\#, Javascript, C++, C, Objective-C, R, Swift, Matlab, Ruby, Visual Basic, VBA, Scala, Perl, lua, Delphi)  \\
Listan ordnad enligt \url{http://pypl.github.io/PYPL.html} i Aug 2016
% Alternativet är TIOBE, men den är längre...:
%(Java, C, C++, C\#, Python, PHP, Javascript, Visual Basic, Perl, Pascal, Ruby, Swift, Groovy, R, Matlab, SQL, Go, Dart, Fortram, Lua, Ada, Lisp, Scala, Prolog, Haskell, Erlang, Rust)
\end{itemize}
\end{Preparations}


\subsection{Bakgrund}

I denna laboration ska du utveckla ett program som analyserar svar på enkäter med flervalsfrågor. Indata utgörs av text i form av \textbf{kolumnseparerade värden}, där varje persons svar finns på en egen rad och varje svarsrad innehåller svarsalternativ separerade med en \textbf{kolumnseparator} som till exempel kan vara \code{;} eller \code{\t}. Första raden i textfilen anger kolumnernas namn.

Exempel på indatafil: \footnote{\TODO gör indataexemplet lite längre så analysexempel blir lite roligare och låt indatafilen finnas med som testfil i workspace}
\begin{CodeSmall}[language=, ]
program;OS;editor;IDE;socialnät;webbläsare;sorteringsalgoritm;språk
W;Gedit;Eclipse;Facebook;Firefox;insättningssortering;Java
D;Atom;Intellij;GitHub;Vivaldi;urvalssortering;Scala
E;emacs;Eclipse;Snapchat;Edge;urvalssortering;C
\end{CodeSmall}

Ditt program ska innehålla följande delar:
\begin{itemize}
\item En case-klass för strängmatriser 
\item Funktioner för inläsning av tabellformatterad text.
\item Funktioner för att presentera statistik från enkätdata med hjälp av registrering.
\item \TODO mer här ?
\end{itemize}


Här är main. Fixa så den funkar.

\scalainputlisting{../workspace/w10_survey/src/main/scala/stats/Main.scala}

\TODO mer här...

\subsection{Obligatoriska uppgifter}

Klassen \code{Table} har parametern \code{matrix} som representerar den inlästa tabellformaterade datan i en tvådimensionell matris. Parametrarna \code{headings} och \code{sep} representerar rubrikerna för varje kolumn respektive separatorn som skiljer kolumnerna åt.

\TODO kodkommentarer
\Task Implementera klassen \code{Table} och objektet \code{Table} enligt specifikation:

\begin{ScalaSpec}{Table}
case class Table(matrix: Vector[Vector[String]], headings: Vector[String], sep: String) {

  val dim: (Int, Int) = ???

  def col(c: Int): Vector[String] = ???

  override lazy val toString: String = ???

  def sort(c: Int): Table = ???

  def filter(c: Int, values: Vector[String]): Table = ???

  def register(c: Int, values: Vector[String] = Vector()): ??? = ???
}

object Table {

  def fromFile(uri: String, sep: String): Option[Table] = ???

  def toFile(path: String, table: Table): Unit = ???
}
\end{ScalaSpec}

\Subtask Implementera \code{dim} och \code{toString}.

\Subtask Implementera \code{col}.%notera att det är möjligt att vektorerna som delar in raderna i kolumner kan vara av olika storlek. T.ex. om enkäten som datan kommer från ser ut: har du programmerat tidigare? (ja, nej) i vilket språk?

\Subtask Implementera \code{sort} med hjälp av någon av de inbyggda sorteringsfunktionerna.

\Subtask Implementera \code{filter} med hjälp av den inbyggda filterfuntionen.

\Subtask Implementera \code{register}. Fundera ut en lämplig returtyp och om kolumnrubriken ska vara med i returdatan. Metoden kommer senare användas för att skapa diagram som presenterar den registrerade datan.\footnote{Om du fastnar kolla in funktionen \code{groupBy}.}

\Task Implementera \code{fromFile} och \code{toFile} i objektet Table enligt specifikation:
\begin{ScalaSpec}{Table}

\end{ScalaSpec}

\Subtask Implementera \code{fromFile}. Inläsning från fil är en oren operation i den mening att det är omöjligt att veta på förhand om det i slutändan är fildatan som fås tillbaka. Filen kanske inte finns eller kanske inte har passande rättigheter för att läsa. Detta måste hanteras på något sätt i programmet. En lösning är att använda klassen Option.
\subsection{Frivilliga extrauppgifter}
    
\Task En labbuppgiftsbeskrivning.

\Subtask En underuppgift.

\Subtask En underuppgift.